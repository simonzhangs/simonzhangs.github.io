(window.webpackJsonp=window.webpackJsonp||[]).push([[305],{818:function(t,a,s){"use strict";s.r(a);var e=s(12),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("我们知道webpack只能处理js文件，对于非js的文件以及其他处理是通过loader来进行打包和plugin利用webpack声明周期进行相应的操作。")]),t._v(" "),s("p",[t._v("Webpack的loader本质上就是一个函数，对给定的输入进行处理，然后输出webpack能够识别的js代码。知道这一点，其实写loader就很简单了。")]),t._v(" "),s("h2",{attrs:{id:"缘由"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缘由"}},[t._v("#")]),t._v(" 缘由")]),t._v(" "),s("p",[t._v("关于为什么想写一个loader呢，是因为我在写博客过程中，会参考很多其他博客、网站上面的内容，往往会贴在文章的末尾，但是读者并不知道是来自哪个网站的，可能想进一步点击的兴趣不会很大，同时也有可能不会信任这个链接。我在想如果可以把链接是归属于那个网站的，自己后来进一步查看的时候也会更方便，这样子问题不就解决了嘛！")]),t._v(" "),s("p",[t._v("这里我写的loader是用来处理"),s("code",[t._v(".md")]),t._v("格式文件，在"),s("code",[t._v(".md")]),t._v("格式输出"),s("code",[t._v(".html")]),t._v("文件时，在对应的链接中添加上归属网站的"),s("code",[t._v("favicon.ico")]),t._v("，这就是网站的鲜明标识了。")]),t._v(" "),s("h2",{attrs:{id:"原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),s("p",[t._v("loader本质上是运行在node环境下的一个模块，所以会导出内容；loader的功能一般比较单一，一般只做单一的功能；如果多个loader来处理同一个文件，是链式调用的，依次从右往左进行调用，右边的输出作为左边的输入。")]),t._v(" "),s("h2",{attrs:{id:"一个简单的loader书写"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一个简单的loader书写"}},[t._v("#")]),t._v(" 一个简单的loader书写")]),t._v(" "),s("h3",{attrs:{id:"_1-初始化项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-初始化项目"}},[t._v("#")]),t._v(" 1. 初始化项目")]),t._v(" "),s("blockquote",[s("p",[t._v("初始化项目")])]),t._v(" "),s("p",[s("code",[t._v("npm init -y")])]),t._v(" "),s("blockquote",[s("p",[t._v("安装依赖")])]),t._v(" "),s("p",[t._v("既然要写webpack的loader，自然要安装webpack以及webpack的脚手架、还有热更新服务器。(注意咱们用的是webpack5.0版本)")]),t._v(" "),s("p",[s("code",[t._v("npm install webpack webpack-cli webpack-dev-server -D")])]),t._v(" "),s("blockquote",[s("p",[t._v("新建一个index.html文件")])]),t._v(" "),s("p",[t._v("在dist文件目录下，建立一个模板html文件，并引入打包后的"),s("code",[t._v(".js")]),t._v("文件。")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./bundle.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("blockquote",[s("p",[t._v("新建入口文件")])]),t._v(" "),s("p",[t._v("入口文件放在"),s("code",[t._v("src/index.js")]),t._v("，也就是后续webpack打包的入口，打包后的js文件即引入到上一步的"),s("code",[t._v("index.html")]),t._v("中。")]),t._v(" "),s("blockquote",[s("p",[t._v("创建"),s("code",[t._v("webpack.config.js")]),t._v("文件")])]),t._v(" "),s("p",[t._v("这一步很重要，面试的过程经常会问，在vue项目中webpack是自己配置的，还是有@vue/cli脚手架配置的，这里其实想考察的是对于webpack的理解。")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("参考文章：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://mp.weixin.qq.com/s/2wDp4cRr6uWmitrsCPLOmQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("手把手教你在 Webpack 写一个 Loader"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);