(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{642:function(s,a,t){"use strict";t.r(a);var n=t(12),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"base64-起源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base64-起源"}},[s._v("#")]),s._v(" Base64 起源")]),s._v(" "),t("p",[s._v("为什么会有 Base64 编码呢？")]),s._v(" "),t("p",[s._v("因为有些网络传送渠道并不支持所有的字节，例如传统的邮件只支持可见字符的传送，像 ASCII 码的控制字符就不能通过邮件传送。这样用途就受到了很大的限制，比如图片二进制流的每个字节不可能全部是可见字符，所以就传送不了。")]),s._v(" "),t("p",[s._v("最好的方法就是在不改变传统协议的情况下，做一种扩展方案来支持二进制文件的传送,把不可打印的字符也能用可打印字符来表示，问题就解决了。Base64 编码应运而生，Base64 就是一种基于 64 个可打印字符来表示二进制数据的表示方法。")]),s._v(" "),t("h2",{attrs:{id:"base64-编码-64-的含义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base64-编码-64-的含义"}},[s._v("#")]),s._v(" Base64 编码 64 的含义")]),s._v(" "),t("p",[s._v("所以说 base64 中 64 指的就是 64 个可打印字符（ASCII 编码）。")]),s._v(" "),t("ul",[t("li",[s._v("A-Z 26")]),s._v(" "),t("li",[s._v("a-z 26")]),s._v(" "),t("li",[s._v("0-9 10")]),s._v(" "),t("li",[t("code",[s._v("+ /")]),s._v(" 2")])]),s._v(" "),t("h2",{attrs:{id:"base64-编码原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base64-编码原理"}},[s._v("#")]),s._v(" Base64 编码原理")]),s._v(" "),t("p",[s._v("因为 base64 编码只有 64 个字符，用 6 个比特表示就可以了，而正常英文字符是采用 ASCII 编码方式，一个字母占一个字节，即 8 个比特位，所以 base 编码时候，会将 3 字节转换为四字节，遇到转换过程中不够三字节时，会自己在后面补上"),t("code",[s._v("=")]),s._v("，所以说编码后体积至少变大 1/3。")]),s._v(" "),t("p",[s._v("6 个有效 bit 来表示传统字符的 8 个 bit 呢？8 和 6 的最小公倍数是 24，也就是说 3 个传统字节可以由 4 个 Base64 字符来表示，保证有效位数是一样的，这样就多了 1/3 的字节数来弥补 Base64 只有 6 个有效 bit 的不足。")]),s._v(" "),t("h2",{attrs:{id:"base64-优缺点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base64-优缺点"}},[s._v("#")]),s._v(" Base64 优缺点")]),s._v(" "),t("p",[s._v("优点：")]),s._v(" "),t("ol",[t("li",[s._v("可以将二进制数据（比如图片）转化为可打印字符，方便传输数据；")]),s._v(" "),t("li",[s._v("对数据进行简单的加密，肉眼是安全的；")]),s._v(" "),t("li",[s._v("如果是在 html 或者 css 处理图片，可以减少 http 请求。")])]),s._v(" "),t("p",[s._v("缺点：")]),s._v(" "),t("ol",[t("li",[s._v("内容编码后体积变大， 至少 1/3（因为是三字节变成四个字节，当只有一个字节的时候，也至少会变成三个字节）；")]),s._v(" "),t("li",[s._v("编码和解码需要额外工作量。")])]),s._v(" "),t("h2",{attrs:{id:"base64-编码和解码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base64-编码和解码"}},[s._v("#")]),s._v(" Base64 编码和解码")]),s._v(" "),t("h2",{attrs:{id:"base64-应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base64-应用场景"}},[s._v("#")]),s._v(" Base64 应用场景")]),s._v(" "),t("h3",{attrs:{id:"_1-canvas-图片生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-canvas-图片生成"}},[s._v("#")]),s._v(" 1. canvas 图片生成")]),s._v(" "),t("p",[s._v("canvas 的 toDataURL 可以把 canvas 的画布内容转 base64 编码格式包含图片展示的 data URI。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ctx "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" canvasEl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2d"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...... other code")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" dataUrl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" canvasEl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toDataURL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// data:image/png;base64,iVBORw0KGgoAAAANSUhE.........")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"_2-文件读取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-文件读取"}},[s._v("#")]),s._v(" 2. 文件读取")]),s._v(" "),t("p",[s._v("FileReader 的 readAsDataURL 可以把上传的文件转为 base64 格式的 data URI，比较常见的场景是用户头像的剪裁和上传。")]),s._v(" "),t("h3",{attrs:{id:"_3-jwt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-jwt"}},[s._v("#")]),s._v(" 3. JWT")]),s._v(" "),t("p",[s._v("JWT 由 header, payload,signature 三部分组成，是通过base64进行的编码，前两个解码后，都是可以明文看见的。")]),s._v(" "),t("h3",{attrs:{id:"_4-网站图片和小图片"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-网站图片和小图片"}},[s._v("#")]),s._v(" 4. 网站图片和小图片")]),s._v(" "),t("p",[s._v("移动端网站图标优化，还有小图片使用场景，比如img标签，背景图等。")]),s._v(" "),t("p",[s._v("img标签：")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("img")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("data:image/png;base64,iVBORw0KGgoAAAA......."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("css背景图：")]),s._v(" "),t("div",{staticClass:"language-css line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".bg")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("background")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token url"}},[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data:image/png;base64,iVBORw0KGgoAAAA......."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_5-简单的数据加密"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-简单的数据加密"}},[s._v("#")]),s._v(" 5. 简单的数据加密")]),s._v(" "),t("p",[s._v("当然这不是好方法，但是至少让你不好解读。")]),s._v(" "),t("h2",{attrs:{id:"补充-前端编码知识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充-前端编码知识"}},[s._v("#")]),s._v(" 补充 -- 前端编码知识")]),s._v(" "),t("h3",{attrs:{id:"_1-比特和字节"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-比特和字节"}},[s._v("#")]),s._v(" 1. 比特和字节")]),s._v(" "),t("p",[s._v("比特又叫位。 在计算机的世界里，信息的表示方式只有 0 和 1, 其可以表示两种状态。一位二进制可以表示两状态， N 位可以表示 2^N 种状态。")]),s._v(" "),t("p",[s._v("一个字节(Byte)有 8 位(Bit)，所以一个字节可以表示 2^8 = 256 种状态。")]),s._v(" "),t("h3",{attrs:{id:"_2-获得字符的-unicode-码点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-获得字符的-unicode-码点"}},[s._v("#")]),s._v(" 2. 获得字符的 Unicode 码点")]),s._v(" "),t("p",[t("code",[s._v("String.prototype.charCodeAt()")]),s._v("方法可以获取字符的码点，获取范围为 0~65535，注意这里获取到的是 Unicode 的码点，不同的编码方式编码之后会得到不同的结果。")]),s._v(" "),t("p",[s._v("常见的编码方式是 UTF-8，还有 UTF-16、UTF-32，这几种编码方式都是基于 Unicode 字符集（全球通用的字符集合）；还有 ASCII 编码是基于 ASCII 字符集（只有 128 个字符，欧美国家字符集合）的。其中 UTF-8 编码是兼容 ASCII 字符集的。这些编码原理可以参考我之前总结的文章："),t("a",{attrs:{href:"https://simonzhangs.github.io/pages/b7d614/",target:"_blank",rel:"noopener noreferrer"}},[s._v("JavaScript 的字符编码"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"_3-进制转换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-进制转换"}},[s._v("#")]),s._v(" 3. 进制转换")]),s._v(" "),t("p",[s._v("10 进制转其他进制，可以通过 Number.prototype.toString(radix):")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1100100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 64, 也等于 ox64")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("其他进制转为 10 进制，可以通过 parseInt(string, radix)，radix 表示当前字符串的进制：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parseInt")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10000000"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 128")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parseInt")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 16")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这里额外提一下一元操作符号"),t("code",[s._v("+")]),s._v("可以把字符串转为数字，后面也会用到,之前提到的 0b,0o,0x 这里都会生效。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1000"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1000")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0b10000000"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 128")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0o10"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 8")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0x10"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 16")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[s._v("说起 Base64 编码可能有些奇怪，因为大多数的编码都是由字符转化成二进制的过程，而从二进制转成字符的过程称为解码。而 Base64 的概念就恰好反了，由二进制转到字符称为编码，由字符到二进制称为解码。")]),s._v(" "),t("p",[s._v("Base64 编码主要用在传输、存储、表示二进制等领域，还可以用来加密，但是这种加密比较简单，只是一眼看上去不知道什么内容罢了，当然也可以对 Base64 的字符序列进行定制来进行加密。")]),s._v(" "),t("p",[s._v('Base64 编码是从二进制到字符的过程，像一些中文字符用不同的编码转为二进制时，产生的二进制是不一样的，所以最终产生的 Base64 字符也不一样。例如"上网"对应 utf-8 格式的 Base64 编码是"5LiK572R"，对应 GB2312 格式的 Base64 编码是"yc/N+A=="。')]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("参考文章：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://juejin.cn/post/6989391487200919566",target:"_blank",rel:"noopener noreferrer"}},[s._v("前端 Base64 编码知识，一文打尽，探索起源，追求真相。"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://juejin.cn/post/6844903698045370376",target:"_blank",rel:"noopener noreferrer"}},[s._v("Base64 原理"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code")]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"})])])}),[],!1,null,null,null);a.default=e.exports}}]);